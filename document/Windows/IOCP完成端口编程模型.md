# IOCP


当一个文件句柄与一个完成端口相关联时，传递进来的状态块将不会被更新，直到包从完成端口被移除。 唯一的例外是原始操作同步返回一个错误。 一个线程(由主线程或主线程本身创建的线程)使用GetQueuedCompletionStatus函数来等待一个完成包被排队到I/O完成端口，而不是直接等待异步I/O完成。 阻塞在I/O完成端口上执行的线程会按照后进先出(LIFO)的顺序被释放，下一个完成包会从I/O完成端口的FIFO队列中为该线程提取。 这意味着，当一个完成包被释放给一个线程时，系统会释放与该端口相关联的最后一个(最近的)线程，并将最老的I/O完成的完成信息传递给它。  